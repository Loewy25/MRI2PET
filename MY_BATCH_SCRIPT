#!/bin/bash

#SBATCH --job-name=CGAN_grc
#SBATCH --mem=10G
#SBATCH -t 23:50:00
##SBATCH --gres=gpu:tesla_a100:1
#SBATCH --partition=tier1_cpu
#SBATCH --account=shinjini_kundu
#SBATCH --exclude=gpua409
#SBATCH --output=slurm-%A_haha.out
#SBATCH --error=slurm-%A_haha.err

module load cuda/12.9
module load cudnn/9.11.0.98-cuda12
module load freesurfer

. ~/miniconda3/bin/activate
conda activate pasta
pip install nibabel

python -c "import nibabel; print(nibabel.__version__)"




. ~/miniconda3/bin/activate
conda activate pasta

python ROI_eval.py \
  --roi-root /scratch/l.peiwang/kari_brainv11 \
  --vols-root /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_1632_batch1_hierachy_ROI_MEMORY/volumes \
  --out /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_1632_batch1_hierachy_ROI_MEMORY/roi_metrics \
  --data-range 3.5 \
  --mmd-voxels 2048


python ROI_eval.py \
  --roi-root /scratch/l.peiwang/kari_brainv11 \
  --vols-root /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_1632_batch1_hierachy_ROI_NOMEMORY/volumes \
  --out /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_1632_batch1_hierachy_ROI_NOMEMORY/roi_metrics \
  --data-range 3.5 \
  --mmd-voxels 2048


python ROI_eval.py \
  --roi-root /scratch/l.peiwang/kari_brainv11 \
  --vols-root /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_2432_batch1_hierachy_ROI_MEMORY/volumes \
  --out /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_2432_batch1_hierachy_ROI_MEMORY/roi_metrics \
  --data-range 3.5 \
  --mmd-voxels 2048

python ROI_eval.py \
  --roi-root /scratch/l.peiwang/kari_brainv11 \
  --vols-root /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_2432_batch1_hierachy_ROI_NOMEMORY/volumes \
  --out /home/l.peiwang/MRI2PET/MGDA_UB_c_stable_contra_2432_batch1_hierachy_ROI_NOMEMORY/roi_metrics \
  --data-range 3.5 \
  --mmd-voxels 2048
